<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Valentine for Dodi</title>

  <style>
    :root{
      --pink1:#ffd3de;
      --pink2:#ffe9f0;
      --ink:#7d1230;
      --heartRed:#ff3e6a;
      --shadow:0 18px 45px rgba(0,0,0,.12);
      --outline:rgba(216,90,119,.55);
      --cardTop:#fff9fb;
      --cardBot:#ffe6ee;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      height:100vh;
      overflow:hidden;
      font-family: Arial, sans-serif;
      background: radial-gradient(circle at 30% 20%, var(--pink2), var(--pink1));
    }

    /* background texture */
    .bgTexture{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.35;
      background:
        radial-gradient(rgba(255,255,255,.55) 1px, transparent 1.8px) 0 0 / 22px 22px,
        radial-gradient(rgba(255,255,255,.25) 1px, transparent 2px) 12px 10px / 26px 26px;
      mix-blend-mode: soft-light;
      z-index:0;
    }

    /* full page floating hearts */
    .globalHearts{
      position:fixed; inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
      opacity:.55;
    }
    .globalHearts span{
      position:absolute;
      bottom:-40px;
      animation: floatUp linear infinite;
      filter: drop-shadow(0 6px 8px rgba(0,0,0,.08));
    }
    @keyframes floatUp{
      from { transform: translateY(0) scale(1); opacity: 1; }
      to   { transform: translateY(-120vh) scale(1.12); opacity: 0; }
    }

    /* pages */
    .page{
      position:absolute; inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      opacity:0;
      pointer-events:none;
      transform: translateY(10px);
      transition: opacity .35s ease, transform .35s ease;
      z-index:1;
    }
    .page.active{
      opacity:1;
      pointer-events:auto;
      transform: translateY(0);
    }

    /* main card */
    .card{
      width:min(900px, 96vw);
      min-height: 470px;
      background: linear-gradient(180deg, var(--cardTop), var(--cardBot));
      border-radius:26px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      padding:28px 22px;
      z-index:2;
    }

    /* music button */
    .musicBtn{
      position:absolute;
      top:14px;
      left:50%;
      transform: translateX(-50%);
      z-index:6;
      border-radius:999px;
      border:2px solid rgba(216,90,119,.55);
      background: rgba(255,255,255,.75);
      backdrop-filter: blur(6px);
      padding:8px 14px;
      font-weight:900;
      color: var(--ink);
      cursor:pointer;
      box-shadow:0 12px 20px rgba(0,0,0,.08);
      user-select:none;
    }
    .musicBtn:active{ transform: translateX(-50%) scale(.98); }

    /* left hanging hearts */
    .hangingHearts{
      position:absolute;
      top:-12px;
      left:16px;
      width:130px;
      height:260px;
      pointer-events:none;
      z-index:3;
    }
    .hanger{ position:absolute; top:0; width:22px; height:240px; }
    .hanger .string{
      position:absolute;
      left:50%; top:0;
      width:2px;
      transform: translateX(-50%);
      background: rgba(220,40,90,.35);
    }
    .hanger .heart{
      position:absolute;
      left:50%;
      transform: translateX(-50%) rotate(45deg);
      width:26px; height:26px;
      background: var(--heartRed);
      border-radius:6px;
      transform-origin: 50% -10px;
      animation: sway 3s ease-in-out infinite;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.08));
    }
    .hanger .heart::before,
    .hanger .heart::after{
      content:"";
      position:absolute;
      width:26px; height:26px;
      background: var(--heartRed);
      border-radius:50%;
    }
    .hanger .heart::before{ left:-13px; top:0; }
    .hanger .heart::after { left:0; top:-13px; }

    .hanger.h1{ left:0px; }
    .hanger.h2{ left:28px; }
    .hanger.h3{ left:56px; }
    .hanger.h4{ left:84px; }

    /* long / short / long / short */
    .hanger.h1 .string{ height:175px; }
    .hanger.h2 .string{ height:120px; }
    .hanger.h3 .string{ height:165px; }
    .hanger.h4 .string{ height:115px; }

    .hanger.h1 .heart{ top:170px; animation-duration:2.6s; }
    .hanger.h2 .heart{ top:115px; animation-duration:3.4s; }
    .hanger.h3 .heart{ top:160px; animation-duration:2.9s; }
    .hanger.h4 .heart{ top:110px; animation-duration:3.7s; }

    @keyframes sway{
      0%,100%{ transform: translateX(-50%) rotate(35deg); }
      50%    { transform: translateX(-50%) rotate(55deg); }
    }

    /* calendar (bigger + red) */
    .calendar{
      position:absolute;
      top:18px;
      right:18px;
      width:150px;
      height:130px;
      background: linear-gradient(180deg, #ffffff, #fff1f5);
      border:2px solid rgba(216,90,119,.55);
      border-radius:18px;
      transform: rotate(8deg);
      box-shadow:0 14px 28px rgba(0,0,0,.10);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      z-index:3;
    }
    .calendar::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(rgba(0,0,0,.035) 1px, transparent 2px) 0 0 / 18px 18px;
      opacity:.7;
      pointer-events:none;
    }
    .calendar .rings{
      position:absolute;
      top:-12px;
      left:14px; right:14px;
      height:20px;
      display:flex;
      justify-content:space-between;
      pointer-events:none;
    }
    .calendar .rings span{
      width:20px; height:20px;
      border-radius:50%;
      border:2px solid rgba(216,90,119,.65);
      background:#fff;
      box-shadow:0 8px 12px rgba(0,0,0,.06);
    }
    .calendar .dateText{
      position:relative;
      text-align:center;
      z-index:1;
      line-height:1;
      font-weight:900;
      color: var(--heartRed);
      text-shadow: 0 2px 0 rgba(255,255,255,.6);
    }
    .calendar .dateText .d{ font-size:46px; }
    .calendar .dateText .m{ font-size:22px; letter-spacing:1px; color: var(--heartRed); }

    /* center layout */
    .center{
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:10px;
      text-align:center;
      padding: 20px 10px;
      position:relative;
      z-index:3;
    }

    .subtitle{
      margin:0;
      font-weight:900;
      color: var(--heartRed);
      font-size: clamp(26px, 3.3vw, 38px);
    }
    .title{
      margin:0;
      font-weight:900;
      color: var(--heartRed);
      font-size: clamp(24px, 3.6vw, 42px);
    }

    /* cat image */
    .cat{
      width: 120px;
      height: 120px;
      border-radius: 18px;
      object-fit: cover;
      border: 3px solid rgba(255,255,255,.85);
      box-shadow:0 16px 30px rgba(0,0,0,.14);
      animation: floatCat 3.2s ease-in-out infinite;
    }
    @keyframes floatCat{
      0%,100%{ transform: translateY(0); }
      50%    { transform: translateY(-8px); }
    }

    /* buttons */
    .btnRow{
      display:flex;
      gap:18px;
      flex-wrap:wrap;
      justify-content:center;
      margin-top: 10px;
      position:relative;
    }
    .btn{
      min-width: 200px;
      padding: 12px 18px;
      border-radius: 999px;
      border:2px solid rgba(216,90,119,.65);
      background: linear-gradient(180deg, #ffd0da, #ffafc0);
      color: var(--ink);
      font-weight:900;
      cursor:pointer;
      box-shadow:0 12px 20px rgba(0,0,0,.08);
      transition: transform .15s ease;
      user-select:none;
    }
    .btn:active{ transform: scale(.98); }
    #noBtn{ position:relative; }

    /* page 2 gifts */
    .giftGrid{
      display:grid;
      grid-template-columns: repeat(3, minmax(160px, 1fr));
      gap:18px;
      width:min(760px, 94%);
      margin-top: 12px;
    }
    .gift{
      height:130px;
      border-radius:18px;
      border:2px solid rgba(216,90,119,.65);
      background: linear-gradient(180deg, #ffd0da, #ffb0c1);
      box-shadow:0 12px 20px rgba(0,0,0,.08);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      color: var(--ink);
      cursor:pointer;
      animation: giftFloat 2.6s ease-in-out infinite;
      user-select:none;
    }
    .gift:nth-child(2){ animation-delay:.2s; }
    .gift:nth-child(3){ animation-delay:.4s; }
    @keyframes giftFloat{
      0%,100%{ transform: translateY(0); }
      50%    { transform: translateY(-6px); }
    }
    .envelope{
      position:absolute;
      right:18px;
      bottom:14px;
      font-size: 46px;
      animation: pulse 1.6s ease-in-out infinite;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.12));
      user-select:none;
      z-index:3;
    }
    @keyframes pulse{
      0%,100%{ transform: scale(1); }
      50%    { transform: scale(1.08); }
    }

    /* Gift 1 bouquet */
    .bouquetLayout{
      width:min(860px, 96%);
      display:grid;
      grid-template-columns: 1fr 1.3fr 1fr;
      gap:18px;
      align-items:center;
      margin-top: 8px;
    }
    .note{
      background:#fff;
      color:#b03b55;
      border:2px solid rgba(216,90,119,.55);
      border-radius:18px;
      padding:12px 14px;
      font-weight:900;
      box-shadow:0 12px 20px rgba(0,0,0,.08);
      opacity:0;
      transform: translateY(8px);
    }
    .note.show{ animation: noteIn .6s ease forwards; }
    @keyframes noteIn{ to{ opacity:1; transform: translateY(0); } }

    .bouquetCard{
      background: rgba(255,255,255,.72);
      border:2px dashed rgba(216,90,119,.6);
      border-radius:22px;
      padding:16px 10px 18px;
      box-shadow:0 16px 30px rgba(0,0,0,.08);
      position:relative;
      overflow:hidden;
      min-height: 280px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
    }
    .bouquetCard::before{
      content:"";
      position:absolute;
      inset:12px;
      border:3px solid rgba(232,68,103,.35);
      border-radius:26px;
      opacity:.85;
      pointer-events:none;
    }
    .bouquetSvg{
      width: 250px;
      max-width: 80%;
      z-index:1;
      filter: drop-shadow(0 16px 18px rgba(0,0,0,.12));
    }
    .bloom{ transform-origin: 50% 60%; opacity:0; transform: scale(0); }
    .bloom.on{ animation: bloom 1.1s ease forwards; }
    @keyframes bloom{
      0%   { opacity:0; transform: scale(0); }
      60%  { opacity:1; transform: scale(1.22); }
      100% { opacity:1; transform: scale(1); }
    }
    .clickme{
      position:absolute;
      bottom:10px;
      right:14px;
      font-weight:900;
      color: var(--heartRed);
      opacity:.8;
      animation: nudge 1.2s ease-in-out infinite;
      z-index:2;
      user-select:none;
    }
    @keyframes nudge{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-4px); }
    }

    /* Gift 2 chocolate */
    .chocoWrap{
      width:min(860px, 96%);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:14px;
      margin-top: 6px;
    }
    .chocoTitle{
      margin:0;
      font-weight:900;
      color: var(--heartRed);
      font-size: clamp(26px, 3.6vw, 44px);
      text-align:center;
    }
    .chocoSub{
      margin:0;
      font-weight:900;
      color:#b03b55;
      opacity:.95;
      text-align:center;
      font-size: clamp(16px, 2.1vw, 22px);
    }
    .chocoBox{
      width:min(720px, 96%);
      background: rgba(255,255,255,.78);
      border:2px solid rgba(216,90,119,.55);
      border-radius:22px;
      box-shadow:0 16px 30px rgba(0,0,0,.08);
      padding:18px;
      position:relative;
      overflow:hidden;
      cursor:pointer;
    }
    .lid{
      width:100%;
      height:70px;
      border-radius:18px;
      background: linear-gradient(180deg, #ff7ea0, #ff3e6a);
      box-shadow:0 14px 18px rgba(0,0,0,.08);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      color:white;
      letter-spacing:.5px;
      user-select:none;
      transform-origin: top;
      transition: transform .6s ease;
    }
    .chocoBox.open .lid{ transform: rotateX(70deg); }

    .tray{
      margin-top:14px;
      background: linear-gradient(180deg, #fff3f7, #ffe3ec);
      border-radius:18px;
      border:2px dashed rgba(216,90,119,.45);
      padding:16px;
    }
    .gridChoco{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
    }
    .piece{
      height:86px;
      border-radius:18px;
      border:2px solid rgba(216,90,119,.45);
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.55), transparent 60%),
                  linear-gradient(180deg, #6b2b1a, #3a140c);
      box-shadow:0 12px 18px rgba(0,0,0,.10);
      display:flex;
      align-items:center;
      justify-content:center;
      color:#ffe9f0;
      font-weight:900;
      letter-spacing:.3px;
      opacity:0;
      transform: translateY(8px) scale(.96);
      user-select:none;
    }
    .piece.show{ animation: pieceIn .55s ease forwards; }
    @keyframes pieceIn{
      to{ opacity:1; transform: translateY(0) scale(1); }
    }
    .tag{
      position:absolute;
      right:16px;
      bottom:14px;
      font-weight:900;
      color:#b03b55;
      opacity:.9;
      user-select:none;
    }
    .sparkle{
      position:absolute;
      font-size:16px;
      opacity:.0;
      animation: sparkle 1.1s ease forwards;
      pointer-events:none;
    }
    @keyframes sparkle{
      0%{ transform: translateY(0) scale(.8); opacity:0; }
      30%{ opacity:1; }
      100%{ transform: translateY(-18px) scale(1.2); opacity:0; }
    }

    /* Gift 3 date */
    .dateWrap{
      width:min(860px, 96%);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:14px;
      margin-top: 6px;
    }
    .dateTitle{
      margin:0;
      font-weight:900;
      color: var(--heartRed);
      font-size: clamp(28px, 3.8vw, 48px);
      text-align:center;
    }
    .dateSub{
      margin:0;
      font-weight:900;
      color:#b03b55;
      text-align:center;
      font-size: clamp(16px, 2.2vw, 24px);
    }
    .heartCircle{
      width:220px; height:220px;
      border-radius:50%;
      position:relative;
      display:grid;
      place-items:center;
      margin: 4px 0 6px;
    }
    .heartCircle span{
      position:absolute;
      font-size:22px;
      color: var(--heartRed);
      animation: orbit 6.5s linear infinite;
      transform-origin: 110px 110px;
      filter: drop-shadow(0 8px 10px rgba(0,0,0,.10));
    }
    @keyframes orbit{
      from{ transform: rotate(0deg) translateX(100px); opacity:.9; }
      to{ transform: rotate(360deg) translateX(100px); opacity:.9; }
    }
    .heartCircle .centerHeart{
      font-size:54px;
      filter: drop-shadow(0 12px 16px rgba(0,0,0,.12));
      animation: pulse2 1.6s ease-in-out infinite;
      user-select:none;
    }
    @keyframes pulse2{
      0%,100%{ transform: scale(1); }
      50%{ transform: scale(1.1); }
    }

    /* ‚úÖ UPDATED: keep chocolates in grid on tablets/phones */
    @media (max-width: 820px){
      .giftGrid{ grid-template-columns: 1fr; }
      .bouquetLayout{ grid-template-columns: 1fr; }
      .gridChoco{ grid-template-columns: repeat(3, 1fr); }
      .hangingHearts{ display:none; }
      .musicBtn{ top:10px; }
    }

    /* ‚úÖ STRONG PHONE FIX: correct proportions + scrolling */
    @media (max-width: 600px){
      body{
        height:auto;
        min-height:100dvh;
        overflow-y:auto;
        overflow-x:hidden;
        -webkit-overflow-scrolling: touch;
      }
      .page{
        padding:12px;
        overflow-y:auto;
        align-items:flex-start;
      }
      .card{
        width:94vw;
        max-height: calc(100dvh - 24px);
        overflow-y:auto;
        -webkit-overflow-scrolling: touch;
        padding:16px 12px;
      }
      .center{
        height:auto;
        justify-content:flex-start;
        padding-top:70px;
        gap:8px;
      }
      .subtitle{ font-size: 22px; line-height:1.1; }
      .title{ font-size: 24px; line-height:1.12; }

      .btn{
        width:86vw;
        max-width:360px;
        min-width:0;
      }

      /* Gift 2 tighter */
      .chocoBox{ padding:12px; width:92vw; }
      .tray{ padding:12px; }
      .gridChoco{ gap:10px; }
      .piece{ height:64px; font-size:13px; }
      .lid{ height:54px; font-size:13px; }

      /* Calendar slightly smaller so it doesn't cover text */
      .calendar{ width:118px; height:104px; top:12px; right:12px; }
      .calendar .dateText .d{ font-size:38px; }
      .calendar .dateText .m{ font-size:18px; }
      .cat{ width:96px; height:96px; }
    }
  </style>
</head>

<body>
  <div class="bgTexture" aria-hidden="true"></div>
  <div class="globalHearts" id="globalHearts" aria-hidden="true"></div>

  <!-- your mp3 must be named music.mp3 and in same folder -->
  <audio id="bgMusic" src="music.mp3" loop preload="auto"></audio>

  <!-- PAGE 1 -->
  <section class="page active" id="page1">
    <div class="card">
      <button class="musicBtn" id="musicBtn">Play Music üéµ</button>

      <div class="hangingHearts" aria-hidden="true">
        <div class="hanger h1"><div class="string"></div><div class="heart"></div></div>
        <div class="hanger h2"><div class="string"></div><div class="heart"></div></div>
        <div class="hanger h3"><div class="string"></div><div class="heart"></div></div>
        <div class="hanger h4"><div class="string"></div><div class="heart"></div></div>
      </div>

      <div class="calendar" aria-hidden="true">
        <div class="rings"><span></span><span></span><span></span></div>
        <div class="dateText">
          <div class="d">14</div>
          <div class="m">FEB</div>
        </div>
      </div>

      <div class="center">
        <img class="cat" src="cat.png" alt="Cat holding flowers" />
        <p class="subtitle">Hey there,</p>
        <h1 class="title">Dodi, will you be my Valentine?</h1>

        <div class="btnRow">
          <button class="btn" id="yesBtn">YES OF COURSE</button>
          <button class="btn" id="noBtn">NO THANK YOU</button>
        </div>
      </div>
    </div>
  </section>

  <!-- PAGE 2 -->
  <section class="page" id="page2">
    <div class="card">
      <button class="musicBtn" id="musicBtn2">Play Music üéµ</button>

      <div class="center" style="gap:6px">
        <h1 class="title">Yay, you said yes!</h1>
        <p class="subtitle" style="font-size:clamp(16px,2.2vw,22px)">I made all this for you hehe</p>

        <div class="giftGrid">
          <div class="gift" data-gift="1">Gift 1</div>
          <div class="gift" data-gift="2">Gift 2</div>
          <div class="gift" data-gift="3">Gift 3</div>
        </div>

        <div class="envelope" title="Love letter">üíå</div>
      </div>
    </div>
  </section>

  <!-- PAGE 3 Gift 1 -->
  <section class="page" id="page3">
    <div class="card">
      <button class="musicBtn" id="musicBtn3">Play Music üéµ</button>

      <div class="center" style="align-items:stretch; text-align:left;">
        <h1 class="title" style="text-align:left; margin-bottom:8px;">Your Peonies & Lilies Bouquet</h1>

        <div class="bouquetLayout">
          <div style="display:flex; flex-direction:column; gap:12px;">
            <!-- ‚úÖ CHANGED TEXT -->
            <div class="note" id="n1">You deserve this dodii hope u like it hihihi</div>
          </div>

          <div class="bouquetCard" id="bouquet">
            <svg class="bouquetSvg" viewBox="0 0 220 320" aria-label="Bouquet">
              <path d="M40 120 Q110 60 180 120 L150 290 Q110 310 70 290 Z"
                    fill="#eaf7ff" stroke="rgba(60,90,120,.25)" stroke-width="3"/>
              <path d="M60 130 Q110 80 160 130 L140 270 Q110 288 80 270 Z"
                    fill="#ffffff" opacity="0.9" stroke="rgba(60,90,120,.15)" stroke-width="2"/>
              <path d="M95 245 C80 230 60 230 55 250 C60 270 82 270 95 255 Z"
                    fill="#ff5a7c" opacity="0.95"/>
              <path d="M125 245 C140 230 160 230 165 250 C160 270 138 270 125 255 Z"
                    fill="#ff5a7c" opacity="0.95"/>
              <rect x="102" y="244" width="18" height="16" rx="6" fill="#e84467"/>
              <path d="M110 260 L95 300" stroke="#e84467" stroke-width="6" stroke-linecap="round"/>
              <path d="M110 260 L125 300" stroke="#e84467" stroke-width="6" stroke-linecap="round"/>
              <path d="M110 170 L90 235" stroke="#3fa35a" stroke-width="6" stroke-linecap="round"/>
              <path d="M110 170 L110 235" stroke="#3fa35a" stroke-width="6" stroke-linecap="round"/>
              <path d="M110 170 L130 235" stroke="#3fa35a" stroke-width="6" stroke-linecap="round"/>

              <g class="bloom" id="f1">
                <circle cx="75" cy="120" r="22" fill="#ff6f91"/>
                <circle cx="60" cy="110" r="16" fill="#ff94ab"/>
                <circle cx="90" cy="110" r="16" fill="#ff94ab"/>
                <circle cx="75" cy="100" r="14" fill="#ffc0d0"/>
              </g>
              <g class="bloom" id="f2">
                <circle cx="110" cy="95" r="25" fill="#ff6f91"/>
                <circle cx="92" cy="88" r="18" fill="#ff94ab"/>
                <circle cx="128" cy="88" r="18" fill="#ff94ab"/>
                <circle cx="110" cy="76" r="14" fill="#ffc0d0"/>
              </g>
              <g class="bloom" id="f3">
                <path d="M150 118 C170 100 188 120 168 140 C160 146 152 140 150 118 Z"
                      fill="#ffffff" stroke="rgba(180,70,90,.18)" stroke-width="3"/>
                <path d="M150 118 C140 98 120 114 130 136 C136 148 146 144 150 118 Z"
                      fill="#ffffff" stroke="rgba(180,70,90,.18)" stroke-width="3"/>
                <circle cx="150" cy="124" r="4" fill="#f4b400"/>
              </g>
              <g class="bloom" id="f4">
                <path d="M55 150 C75 132 92 152 72 170 C64 176 57 170 55 150 Z"
                      fill="#ffffff" stroke="rgba(180,70,90,.18)" stroke-width="3"/>
                <path d="M55 150 C45 130 26 146 36 168 C42 180 51 176 55 150 Z"
                      fill="#ffffff" stroke="rgba(180,70,90,.18)" stroke-width="3"/>
                <circle cx="55" cy="156" r="4" fill="#f4b400"/>
              </g>
              <g class="bloom" id="f5">
                <circle cx="140" cy="80" r="20" fill="#ff6f91"/>
                <circle cx="125" cy="74" r="14" fill="#ff94ab"/>
                <circle cx="155" cy="74" r="14" fill="#ff94ab"/>
                <circle cx="140" cy="64" r="12" fill="#ffc0d0"/>
              </g>
            </svg>

            <div class="clickme">click me</div>
          </div>

          <div style="display:flex; flex-direction:column; gap:12px;">
            <!-- ‚úÖ CHANGED TEXT -->
            <div class="note" id="n2">I appreciate your presence more than words can say üò∏</div>
          </div>
        </div>

        <div style="margin-top:12px; text-align:center;">
          <button class="btn" id="backBtn1" style="min-width:220px;">Back to gifts</button>
        </div>
      </div>
    </div>
  </section>

  <!-- PAGE 4 Gift 2 -->
  <section class="page" id="page4">
    <div class="card">
      <button class="musicBtn" id="musicBtn4">Play Music üéµ</button>

      <div class="center">
        <div class="chocoWrap">
          <h1 class="chocoTitle">A sweet gift for you, Dodi üç´</h1>
          <p class="chocoSub">Toffifee ‚Ä¢ Lion ‚Ä¢ and other chocolates too üòã</p>

          <div class="chocoBox" id="chocoBox">
            <div class="lid">Tap to open the chocolate box</div>

            <div class="tray">
              <div class="gridChoco" id="chocoGrid">
                <div class="piece">Toffifee</div>
                <div class="piece">Lion</div>
                <div class="piece">Other</div>
                <div class="piece">Toffifee</div>
                <div class="piece">Lion</div>
                <div class="piece">Other</div>
                <div class="piece">Toffifee</div>
                <div class="piece">Lion</div>
                <div class="piece">Other</div>
              </div>
            </div>

            <div class="tag">üç´ made with love</div>
          </div>

          <div style="display:flex; gap:14px; flex-wrap:wrap; justify-content:center; margin-top:6px;">
            <button class="btn" id="backBtn2" style="min-width:220px;">Back to gifts</button>
            <button class="btn" id="nextToGift3" style="min-width:220px;">Next gift ‚ûú</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- PAGE 5 Gift 3 -->
  <section class="page" id="page5">
    <div class="card">
      <button class="musicBtn" id="musicBtn5">Play Music üéµ</button>

      <div class="center">
        <div class="dateWrap">
          <h1 class="dateTitle">Thank you for saying yes ü•∫‚ù§Ô∏è</h1>
          <p class="dateSub">Let‚Äôs make it special.</p>

          <div class="heartCircle" aria-hidden="true">
            <div class="centerHeart">‚ù§Ô∏è</div>
            <span style="animation-delay:0s;">‚ù§</span>
            <span style="animation-delay:.6s;">‚ù§</span>
            <span style="animation-delay:1.2s;">‚ù§</span>
            <span style="animation-delay:1.8s;">‚ù§</span>
            <span style="animation-delay:2.4s;">‚ù§</span>
            <span style="animation-delay:3s;">‚ù§</span>
            <span style="animation-delay:3.6s;">‚ù§</span>
            <span style="animation-delay:4.2s;">‚ù§</span>
          </div>

          <!-- ‚úÖ CHANGED BUTTON TEXT -->
          <button class="btn" id="planDateBtn" style="min-width:260px;">Plan our first meeting irl üíï</button>

          <div style="display:flex; gap:14px; flex-wrap:wrap; justify-content:center; margin-top:6px;">
            <button class="btn" id="backBtn3" style="min-width:220px;">Back to gifts</button>
            <button class="btn" id="backToStart" style="min-width:220px;">Back to start</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    /* page switching */
    function showPage(id){
      document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      syncMusicButtons();
    }

    /* floating hearts */
    (function makeGlobalHearts(){
      const container = document.getElementById("globalHearts");
      const count = 22;
      for(let i=0;i<count;i++){
        const s = document.createElement("span");
        s.textContent = "‚ù§";
        s.style.left = (Math.random()*100) + "vw";
        const size = 18 + Math.random()*14;
        s.style.fontSize = size + "px";
        s.style.opacity = (0.25 + Math.random()*0.35);
        s.style.color = (Math.random() > 0.5) ? "#ff3e6a" : "#ff7aa0";
        s.style.animationDuration = (7 + Math.random()*7) + "s";
        s.style.animationDelay = (Math.random()*3) + "s";
        container.appendChild(s);
      }
    })();

    /* audio */
    const music = document.getElementById("bgMusic");
    const musicBtnIds = ["musicBtn","musicBtn2","musicBtn3","musicBtn4","musicBtn5"];
    const musicBtns = musicBtnIds.map(id => document.getElementById(id));

    function isPlaying(){
      return !music.paused && !music.ended && music.currentTime > 0;
    }
    function syncMusicButtons(){
      const label = isPlaying() ? "Pause ‚è∏" : "Play Music üéµ";
      musicBtns.forEach(b => { if(b) b.textContent = label; });
    }
    musicBtns.forEach(btn => {
      if(!btn) return;
      btn.addEventListener("click", async () => {
        try{
          if(isPlaying()) music.pause();
          else await music.play();
          syncMusicButtons();
        }catch(e){
          alert("Music couldn't play. Make sure the file is named music.mp3 and is in the same folder as v5.html.");
        }
      });
    });

    /* page 1 yes/no */
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");

    yesBtn.addEventListener("click", () => showPage("page2"));

    function jumpNoButton(){
      const card = document.querySelector("#page1 .card");
      const rect = card.getBoundingClientRect();
      const maxX = rect.width - noBtn.offsetWidth - 20;
      const maxY = rect.height - noBtn.offsetHeight - 20;
      const x = Math.max(10, Math.floor(Math.random() * maxX));
      const y = Math.max(10, Math.floor(Math.random() * maxY));
      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
    }
    noBtn.addEventListener("click", (e) => { e.preventDefault(); jumpNoButton(); });

    /* gifts navigation */
    document.querySelectorAll(".gift").forEach(g => {
      g.addEventListener("click", () => {
        const which = g.dataset.gift;
        if(which === "1"){ showPage("page3"); startBouquetAnimation(); }
        if(which === "2"){ showPage("page4"); }
        if(which === "3"){ showPage("page5"); }
      });
    });

    document.getElementById("backBtn1").addEventListener("click", () => showPage("page2"));
    document.getElementById("backBtn2").addEventListener("click", () => showPage("page2"));
    document.getElementById("backBtn3").addEventListener("click", () => showPage("page2"));
    document.getElementById("backToStart").addEventListener("click", () => showPage("page1"));
    document.getElementById("nextToGift3").addEventListener("click", () => showPage("page5"));

    /* bouquet animation */
    let bouquetStarted = false;
    function startBouquetAnimation(){
      if(bouquetStarted) return;
      bouquetStarted = true;
      const flowers = ["f1","f2","f3","f4","f5"].map(id => document.getElementById(id));
      const notes   = ["n1","n2"].map(id => document.getElementById(id));
      flowers.forEach((el, idx) => setTimeout(() => el.classList.add("on"), idx * 450));
      notes.forEach((el, idx) => setTimeout(() => el.classList.add("show"), 800 + idx * 350));
    }
    document.getElementById("bouquet").addEventListener("click", () => {
      alert("This bouquet is for you, Dodi üå∏");
    });

    /* chocolate box open animation */
    const chocoBox = document.getElementById("chocoBox");
    const pieces = Array.from(document.querySelectorAll("#chocoGrid .piece"));
    let boxOpened = false;

    function spawnSparkle(el){
      const sp = document.createElement("div");
      sp.className = "sparkle";
      sp.textContent = (Math.random() > 0.5) ? "‚ú®" : "‚ù§";
      const r = el.getBoundingClientRect();
      const parentR = chocoBox.getBoundingClientRect();
      sp.style.left = (r.left - parentR.left + Math.random()*r.width) + "px";
      sp.style.top  = (r.top - parentR.top + Math.random()*r.height) + "px";
      chocoBox.appendChild(sp);
      setTimeout(() => sp.remove(), 1200);
    }

    chocoBox.addEventListener("click", () => {
      chocoBox.classList.add("open");
      if(boxOpened) return;
      boxOpened = true;
      pieces.forEach((p, i) => {
        setTimeout(() => {
          p.classList.add("show");
          spawnSparkle(p);
        }, 220 + i*120);
      });
    });

    /* plan date button */
    document.getElementById("planDateBtn").addEventListener("click", () => {
      alert("Okay Dodi üíï tell me your free day and we‚Äôll plan it right now üòÑ");
    });

    syncMusicButtons();
  </script>
</body>
</html>
